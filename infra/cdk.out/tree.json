{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.237.1"},"children":{"TdahChatbotStack":{"id":"TdahChatbotStack","path":"TdahChatbotStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.237.1"},"children":{"Storage":{"id":"Storage","path":"TdahChatbotStack/Storage","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"KnowledgeBaseBucket":{"id":"KnowledgeBaseBucket","path":"TdahChatbotStack/Storage/KnowledgeBaseBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"TdahChatbotStack/Storage/KnowledgeBaseBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"mvp-tdah-kb-docs","versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"TdahChatbotStack/Storage/KnowledgeBaseBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"TdahChatbotStack/Storage/KnowledgeBaseBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"StorageKnowledgeBaseBucket36172A57"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["StorageKnowledgeBaseBucket36172A57","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["StorageKnowledgeBaseBucket36172A57","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"BucketArn":{"id":"BucketArn","path":"TdahChatbotStack/Storage/BucketArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}},"BucketName":{"id":"BucketName","path":"TdahChatbotStack/Storage/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}}}},"Search":{"id":"Search","path":"TdahChatbotStack/Search","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"EncryptionPolicy":{"id":"EncryptionPolicy","path":"TdahChatbotStack/Search/EncryptionPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchserverless.CfnSecurityPolicy","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::OpenSearchServerless::SecurityPolicy","aws:cdk:cloudformation:props":{"name":"tdah-knowledge-encryption","policy":"{\"Rules\": [{\"ResourceType\": \"collection\", \"Resource\": [\"collection/tdah-knowledge\"]}], \"AWSOwnedKey\": true}","type":"encryption"}}},"KbCollection":{"id":"KbCollection","path":"TdahChatbotStack/Search/KbCollection","constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchserverless.CfnCollection","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::OpenSearchServerless::Collection","aws:cdk:cloudformation:props":{"description":"Colecao de busca vetorial para chatbot TDAH","name":"tdah-knowledge","type":"VECTORSEARCH"}}},"CollectionEndpoint":{"id":"CollectionEndpoint","path":"TdahChatbotStack/Search/CollectionEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}},"CollectionId":{"id":"CollectionId","path":"TdahChatbotStack/Search/CollectionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}}}},"Compute":{"id":"Compute","path":"TdahChatbotStack/Compute","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"ChatbotLambdaRole":{"id":"ChatbotLambdaRole","path":"TdahChatbotStack/Compute/ChatbotLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.237.1"},"children":{"Resource":{"id":"Resource","path":"TdahChatbotStack/Compute/ChatbotLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"roleName":"tdah-chatbot-handler-role"}}}}},"ChatbotLambda":{"id":"ChatbotLambda","path":"TdahChatbotStack/Compute/ChatbotLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.237.1"},"children":{"Code":{"id":"Code","path":"TdahChatbotStack/Compute/ChatbotLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.237.1"},"children":{"Stage":{"id":"Stage","path":"TdahChatbotStack/Compute/ChatbotLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.237.1"}},"AssetBucket":{"id":"AssetBucket","path":"TdahChatbotStack/Compute/ChatbotLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.237.1"}}}},"Resource":{"id":"Resource","path":"TdahChatbotStack/Compute/ChatbotLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.237.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"},"s3Key":"1714d8b254a262a3d3806ce12ed5dbf4adb1cb574579d9542dc22e0f4ddaa397.zip"},"environment":{"variables":{"LOG_LEVEL":"INFO"}},"functionName":"tdah-chatbot-handler","handler":"lambda_function.lambda_handler","role":{"Fn::GetAtt":["ComputeChatbotLambdaRole9D5893BA","Arn"]},"runtime":"python3.9"}}}}},"LambdaArn":{"id":"LambdaArn","path":"TdahChatbotStack/Compute/LambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.237.1"}}}},"CDKMetadata":{"id":"CDKMetadata","path":"TdahChatbotStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"TdahChatbotStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.237.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"TdahChatbotStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.237.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"TdahChatbotStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.237.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}